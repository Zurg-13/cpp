// INCLUDE. --------------------------------------------------------------------
//------------------------------------------------------------------------------
#include "ui_DList.h"
#include "DList.h"

/* DList **********************************************************************/
/******************************************************************************/

// Конструктор. ----------------------------------------------------------------
//------------------------------------------------------------------------------
DList::DList(QWidget *parent) : QDialog(parent), ui(new Ui::DList) {
    ui->setupUi(this);
}// DList

// Деструктор. -----------------------------------------------------------------
//------------------------------------------------------------------------------
DList::~DList() {
    delete ui;
}//~DList

// Вызывается при показе формы. ------------------------------------------------
//------------------------------------------------------------------------------
void DList::showEvent(QShowEvent*) { ui->lw->setFocus(); }

// Показать список выбора. -----------------------------------------------------
//------------------------------------------------------------------------------
void DList::set(const Set &set) {

    ui->lw->clear();
    for(int i: set.keys()) {
        ui->lw->addItem(new Itm(i, set[i]));
    }// i

}// show

// Вернуть выбранные элементы. -------------------------------------------------
//------------------------------------------------------------------------------
Set DList::get(void) {
    Set res;

    for(QListWidgetItem *itm :ui->lw->selectedItems() )
        { res[dynamic_cast<Itm*>(itm)->id] = itm->text(); }

    return res;
}// list

/* Itm ************************************************************************/
/******************************************************************************/

// Конструктор. ----------------------------------------------------------------
//------------------------------------------------------------------------------
Itm::Itm(int id, const QString &text, QListWidget *parent, int type)
: QListWidgetItem(text, parent, type), id(id)
{

}// Itm


//------------------------------------------------------------------------------


